{"openapi":"3.1.0","info":{"title":"Distribuidora Perros y Gatos API","description":"Backend API para tienda de productos para mascotas","version":"1.0.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/register":{"post":{"tags":["Authentication","auth"],"summary":"Register","description":"Register new user with email verification\n\nRequirements (HU_REGISTER_USER):\n- Email must be unique and verified via 6-digit code\n- Password: 10+ chars, uppercase, digit, special char\n- Sends verification email with 6-digit code (10 min expiry)\n- Publishes to email.verification queue","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/verify-email":{"post":{"tags":["Authentication","auth"],"summary":"Verify Email","description":"Verify user email with 6-digit code\n\nRequirements:\n- Code must match stored verification code\n- Code expires after 10 minutes\n- Mark usuario as is_active=True after verification","operationId":"verify_email_api_auth_verify_email_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/resend-code":{"post":{"tags":["Authentication","auth"],"summary":"Resend Code","description":"Resend verification code\n\nRequirements:\n- Email exists and user is not already active\n- Respect rate-limit: max 3 reenvÃ­os in 60 minutes","operationId":"resend_code_api_auth_resend_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResendCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication","auth"],"summary":"Login","description":"User login with credentials, handling account lockout and token generation.","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/refresh":{"post":{"tags":["Authentication","auth"],"summary":"Refresh Token","description":"Refresh access token using refresh token from HttpOnly cookie.","operationId":"refresh_token_api_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/api/auth/logout":{"post":{"tags":["Authentication","auth"],"summary":"Logout","description":"User logout by revoking the refresh token.","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/categorias":{"get":{"tags":["Categories","Categories"],"summary":"Get Categories","description":"Get complete category structure with subcategories - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- GET /api/admin/categorias\n- Returns tree structure: categories with their subcategories\n- Producer can read directly from DB (synchronous read)","operationId":"get_categories_api_admin_categorias_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategoriaResponse"},"type":"array","title":"Response Get Categories Api Admin Categorias Get"}}}}}},"post":{"tags":["Categories","Categories"],"summary":"Create Category","description":"Create new category - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- POST /api/admin/categorias\n- Body: { \"nombre\": \"NombreCategoria\" }\n- Validations: nombre obligatorio, min 2 chars, no espacios vacÃ­os\n- Publishes to categorias.crear queue","operationId":"create_category_api_admin_categorias_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoriaCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/subcategorias":{"post":{"tags":["Categories","Categories"],"summary":"Create Subcategory","description":"Create new subcategory - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- POST /api/admin/subcategorias\n- Body: { \"categoriaId\": \"<id>\", \"nombre\": \"NombreSubcategoria\" }\n- Validations: categoriaId obligatorio y vÃ¡lido, nombre obligatorio y min 2 chars\n- Publishes to subcategorias.crear queue","operationId":"create_subcategory_api_admin_subcategorias_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubcategoriaCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/categorias/{id}":{"put":{"tags":["Categories","Categories"],"summary":"Update Category","description":"Update category name - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- PUT /api/admin/categorias/{id}\n- Body: { \"nombre\": \"NuevoNombre\" }\n- Publishes to categorias.actualizar queue","operationId":"update_category_api_admin_categorias__id__put","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoriaUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Categories","Categories"],"summary":"Delete Category","description":"Delete category - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- DELETE /api/admin/categorias/{id}\n- Validates that no products are associated with the category\n- Publishes to categorias.eliminar queue\n- Worker validates and rejects if products exist","operationId":"delete_category_api_admin_categorias__id__delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}},{"name":"sync","in":"query","required":false,"schema":{"type":"boolean","description":"Ejecutar eliminaciÃ³n de forma sÃ­ncrona en la BD (True por defecto para pruebas)","default":true,"title":"Sync"},"description":"Ejecutar eliminaciÃ³n de forma sÃ­ncrona en la BD (True por defecto para pruebas)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/subcategorias/{id}":{"put":{"tags":["Categories","Categories"],"summary":"Update Subcategory","description":"Update subcategory name - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- PUT /api/admin/subcategorias/{id}\n- Body: { \"nombre\": \"NuevoNombre\" }\n- Publishes to subcategorias.actualizar queue","operationId":"update_subcategory_api_admin_subcategorias__id__put","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubcategoriaUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Categories","Categories"],"summary":"Delete Subcategory","description":"Delete subcategory - EXACT implementation per HU_MANAGE_CATEGORIES\n\nRequirements:\n- DELETE /api/admin/subcategorias/{id}\n- Validates that no products are associated with the subcategory\n- Publishes to subcategorias.eliminar queue\n- Worker validates and rejects if products exist","operationId":"delete_subcategory_api_admin_subcategorias__id__delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}},{"name":"sync","in":"query","required":false,"schema":{"type":"boolean","description":"Ejecutar eliminaciÃ³n de forma sÃ­ncrona en la BD (True por defecto para pruebas)","default":true,"title":"Sync"},"description":"Ejecutar eliminaciÃ³n de forma sÃ­ncrona en la BD (True por defecto para pruebas)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos":{"post":{"tags":["Products","products"],"summary":"Create Product","description":"Create new product with details\n\nRequirements (HU_CREATE_PRODUCT):\n- Validates product name, price, weight, category, subcategory\n- Price > 0, weight > 0\n- Category and subcategory must exist\n- Publishes productos.crear queue message\n- Handles image uploads separately","operationId":"create_product_api_admin_productos_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_product_api_admin_productos_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Products","products"],"summary":"List Products","description":"List products with optional filtering by category/subcategory\n\nRequirements:\n- Filter by category_id and/or subcategory_id\n- Pagination support\n- Return active products","operationId":"list_products_api_admin_productos_get","parameters":[{"name":"categoria_id","in":"query","required":false,"schema":{"type":"integer","minimum":1,"title":"Categoria Id"}},{"name":"subcategoria_id","in":"query","required":false,"schema":{"type":"integer","minimum":1,"title":"Subcategoria Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductoResponse"},"title":"Response List Products Api Admin Productos Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}":{"get":{"tags":["Products","products"],"summary":"Get Product","description":"Get product details\n\n- Returns full product information including images, category and subcategory\n- By default only active products are returned (activo = 1). Set `include_inactive=true` to allow fetching inactive products for admin purposes.","operationId":"get_product_api_admin_productos__producto_id__get","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Products","products"],"summary":"Update Product","description":"Update product information\n\nRequirements (HU_CREATE_PRODUCT):\n- Update name, price, weight, category, subcategory\n- Validates all fields\n- Publishes productos.actualizar queue message","operationId":"update_product_api_admin_productos__producto_id__put","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductoUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Products","products"],"summary":"Delete Product","description":"Soft delete product (mark as inactive)\n\nRequirements:\n- Set activo=False instead of deleting\n- Publishes productos.eliminar queue message","operationId":"delete_product_api_admin_productos__producto_id__delete","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}/stock":{"put":{"tags":["Products","products"],"summary":"Update Product Stock","description":"Producer endpoint: manually update product stock (only publishes message to RabbitMQ)\n\nValidations and exact messages required by the HU:\n- Missing required fields -> \"Por favor, completa todos los campos obligatorios.\"\n- cantidad must be positive -> \"La cantidad debe ser un nÃºmero positivo.\"\n- If product missing -> \"Producto no encontrado.\"\n- On success -> \"Existencias actualizadas exitosamente\"","operationId":"update_product_stock_api_admin_productos__producto_id__stock_put","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Inventory","inventory"],"summary":"Get Stock","description":"Get current stock for product\n\nRequirements:\n- Return current cantidad_disponible\n- Return last restock date/time\n- Return total movements count","operationId":"get_stock_api_admin_productos__producto_id__stock_get","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}/images":{"post":{"tags":["Products","products"],"summary":"Upload Product Image","description":"Upload product image\n\nRequirements (HU_CREATE_PRODUCT):\n- Max 10 MB file size\n- Allowed formats: jpg, jpeg, png, svg, webp\n- Stores in uploads/productos/{producto_id}/\n- Publishes productos.imagen.crear queue message","operationId":"upload_product_image_api_admin_productos__producto_id__images_post","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_product_image_api_admin_productos__producto_id__images_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Products","products"],"summary":"List Product Images","description":"List all images for a product\n\nReturns an array of image records with `id`, `ruta_imagen`, `es_principal` and `orden`.","operationId":"list_product_images_api_admin_productos__producto_id__images_get","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}/images/{imagen_id}":{"get":{"tags":["Products","products"],"summary":"Get Product Image","description":"Get a single product image by id\n\n- Validates that the product exists and is active\n- Validates that the image exists and belongs to the given product\n- Returns a `ProductoImagenResponse` object","operationId":"get_product_image_api_admin_productos__producto_id__images__imagen_id__get","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}},{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductoImagenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Products","products"],"summary":"Update Product Image","description":"Update product image (replace file and/or metadata)\n\n- Accepts multipart/form-data with optional `file` and optional fields `es_principal` and `orden`.\n- Validates product and image existence, validates file extension and size, saves new file, updates DB, deletes old file on success, and publishes `productos.imagen.actualizar`.","operationId":"update_product_image_api_admin_productos__producto_id__images__imagen_id__put","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}},{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_product_image_api_admin_productos__producto_id__images__imagen_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Products","products"],"summary":"Delete Product Image","description":"Delete product image\n\nRequirements (HU_CREATE_PRODUCT):\n- Delete image file and database record\n- Publishes productos.imagen.eliminar queue message","operationId":"delete_product_image_api_admin_productos__producto_id__images__imagen_id__delete","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}},{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}/reabastecer":{"post":{"tags":["Inventory","inventory"],"summary":"Restock Product","description":"Restock product inventory\n\nRequirements (HU_MANAGE_INVENTORY):\n- Add stock quantity to product\n- cantidad > 0\n- Create audit entry in InventarioHistorial\n- Record usuario_id, timestamp, tipo_movimiento='REABASTECIMIENTO'\n- Publishes inventario.actualizar queue message\n- Rate limiting: max 10 restock operations per product per hour","operationId":"restock_product_api_admin_productos__producto_id__reabastecer_post","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReabastecimientoRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/productos/{producto_id}/historial":{"get":{"tags":["Inventory","inventory"],"summary":"Get Inventory History","description":"Get inventory history for product\n\nRequirements (HU_MANAGE_INVENTORY):\n- Returns all inventory movements (restock, sales, adjustments)\n- Sorted by date descending (newest first)\n- Includes usuario_id, tipo_movimiento, cantidad changes\n- Pagination support","operationId":"get_inventory_history_api_admin_productos__producto_id__historial_get","parameters":[{"name":"producto_id","in":"path","required":true,"schema":{"type":"integer","title":"Producto Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/InventarioHistorialResponse"},"title":"Response Get Inventory History Api Admin Productos  Producto Id  Historial Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/carrusel":{"get":{"tags":["Carousel","carousel"],"summary":"List Carousel Images","description":"List all carousel images ordered by position\n\nRequirements (HU_MANAGE_CAROUSEL):\n- Return max 5 images\n- Sorted by orden (1-5)\n- Include ruta_imagen and link_url\n- Only active images","operationId":"list_carousel_images_api_admin_carrusel_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CarruselImagenResponse"},"type":"array","title":"Response List Carousel Images Api Admin Carrusel Get"}}}}}},"post":{"tags":["Carousel","carousel"],"summary":"Add Carousel Image","description":"Add new carousel image\n\nRequirements (HU_MANAGE_CAROUSEL):\n- Max 5 images allowed (error if trying to exceed)\n- orden must be unique and 1-5\n- File max 10 MB\n- Allowed formats: jpg, jpeg, png, svg, webp\n- Stores in uploads/carrusel/\n- Publishes carrusel.imagen.crear queue message","operationId":"add_carousel_image_api_admin_carrusel_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_carousel_image_api_admin_carrusel_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarruselImagenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/carrusel/{imagen_id}":{"put":{"tags":["Carousel","carousel"],"summary":"Update Carousel Image","description":"Update carousel image order or link\n\nRequirements (HU_MANAGE_CAROUSEL):\n- Update orden (1-5, must remain unique)\n- Update link_url\n- Publishes carrusel.imagen.actualizar queue message","operationId":"update_carousel_image_api_admin_carrusel__imagen_id__put","parameters":[{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarruselImagenUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CarruselImagenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Carousel","carousel"],"summary":"Delete Carousel Image","description":"Delete carousel image\n\nRequirements (HU_MANAGE_CAROUSEL):\n- Delete image file and database record\n- Reorder remaining images to maintain 1-5 sequence\n- Publishes carrusel.imagen.eliminar queue message","operationId":"delete_carousel_image_api_admin_carrusel__imagen_id__delete","parameters":[{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/carrusel/{imagen_id}/reorder":{"post":{"tags":["Carousel","carousel"],"summary":"Reorder Carousel","description":"Reorder carousel image position\n\nRequirements (HU_MANAGE_CAROUSEL):\n- Move image to new position (1-5)\n- Adjust other images' positions accordingly\n- Publishes carrusel.imagen.reordenar queue message","operationId":"reorder_carousel_api_admin_carrusel__imagen_id__reorder_post","parameters":[{"name":"imagen_id","in":"path","required":true,"schema":{"type":"integer","title":"Imagen Id"}}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_reorder_carousel_api_admin_carrusel__imagen_id__reorder_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/carrusel/reordenar":{"put":{"tags":["Carousel","carousel"],"summary":"Bulk Reorder","description":"Bulk reorder endpoint: accepts payload {\"ordenes\": [{\"id\":..., \"orden\":...}, ...]}","operationId":"bulk_reorder_api_admin_carrusel_reordenar_put","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/pedidos/":{"get":{"tags":["Orders","orders"],"summary":"List Orders","description":"List all orders with optional filtering\n\nRequirements (HU_MANAGE_ORDERS):\n- Filter by estado (Pendiente, Enviado, Entregado, Cancelado)\n- Filter by usuario_id\n- Sort by fecha_creacion DESC (newest first)\n- Return order with items and total\n- Pagination support","operationId":"list_orders_api_admin_pedidos__get","parameters":[{"name":"estado","in":"query","required":false,"schema":{"type":"string","pattern":"^(Pendiente|Enviado|Entregado|Cancelado)$","title":"Estado"}},{"name":"usuario_id","in":"query","required":false,"schema":{"type":"integer","title":"Usuario Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PedidoResponse"},"title":"Response List Orders Api Admin Pedidos  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Orders","orders"],"summary":"Create Order","operationId":"create_order_api_admin_pedidos__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/pedidos/{pedido_id}":{"put":{"tags":["Orders","orders"],"summary":"Update Order","operationId":"update_order_api_admin_pedidos__pedido_id__put","parameters":[{"name":"pedido_id","in":"path","required":true,"schema":{"type":"integer","title":"Pedido Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Orders","orders"],"summary":"Delete Order","operationId":"delete_order_api_admin_pedidos__pedido_id__delete","parameters":[{"name":"pedido_id","in":"path","required":true,"schema":{"type":"integer","title":"Pedido Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Orders","orders"],"summary":"Get Order","description":"Get order details with items\n\nRequirements:\n- Return full order information\n- Include all PedidoItems with product info\n- Include estado history","operationId":"get_order_api_admin_pedidos__pedido_id__get","parameters":[{"name":"pedido_id","in":"path","required":true,"schema":{"type":"integer","title":"Pedido Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/pedidos/{pedido_id}/status":{"put":{"tags":["Orders","orders"],"summary":"Update Order Status","description":"Update order status\n\nRequirements (HU_MANAGE_ORDERS):\n- Valid status: Pendiente, Enviado, Entregado, Cancelado\n- Create audit entry in PedidosHistorialEstado\n- Record estado change with timestamp and usuario_id\n- Publishes pedido.estado.cambiar queue message\n- Include optional nota with change reason","operationId":"update_order_status_api_admin_pedidos__pedido_id__status_put","parameters":[{"name":"pedido_id","in":"path","required":true,"schema":{"type":"integer","title":"Pedido Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoEstadoUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PedidoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/pedidos/{pedido_id}/history":{"get":{"tags":["Orders","orders"],"summary":"Get Order History","description":"Get order status change history\n\nRequirements:\n- Return all estado changes for order\n- Sorted by fecha DESC (newest first)\n- Include usuario_id who made change\n- Include change notes","operationId":"get_order_history_api_admin_pedidos__pedido_id__history_get","parameters":[{"name":"pedido_id","in":"path","required":true,"schema":{"type":"integer","title":"Pedido Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/pedidos/user/{usuario_id}":{"get":{"tags":["Orders","orders"],"summary":"Get User Orders","description":"Get all orders for a specific user\n\nRequirements:\n- Filter orders by usuario_id\n- Pagination support\n- Return orders with items","operationId":"get_user_orders_api_admin_pedidos_user__usuario_id__get","parameters":[{"name":"usuario_id","in":"path","required":true,"schema":{"type":"integer","title":"Usuario Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PedidoResponse"},"title":"Response Get User Orders Api Admin Pedidos User  Usuario Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/usuarios":{"get":{"tags":["Admin Users","admin-users"],"summary":"List Users","description":"List all customers with optional search\n\nRequirements (HU_MANAGE_USERS):\n- Search by nombre, email, or cedula (case-insensitive)\n- Sort by fecha_registro DESC (newest first)\n- Return user details but NO password\n- Pagination support\n- Database indexes on email, cedula, nombre for performance","operationId":"list_users_api_admin_usuarios_get","parameters":[{"name":"nombre","in":"query","required":false,"schema":{"type":"string","title":"Nombre"}},{"name":"email","in":"query","required":false,"schema":{"type":"string","title":"Email"}},{"name":"cedula","in":"query","required":false,"schema":{"type":"string","title":"Cedula"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioDetailResponse"},"title":"Response List Users Api Admin Usuarios Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/usuarios/{usuario_id}":{"get":{"tags":["Admin Users","admin-users"],"summary":"Get User","description":"Get customer profile details\n\nRequirements (HU_MANAGE_USERS):\n- Return full user information\n- Include fecha_registro and ultimo_login\n- Do NOT include password\n- Return 404 if user not found","operationId":"get_user_api_admin_usuarios__usuario_id__get","parameters":[{"name":"usuario_id","in":"path","required":true,"schema":{"type":"integer","title":"Usuario Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/usuarios/{usuario_id}/pedidos":{"get":{"tags":["Admin Users","admin-users"],"summary":"Get User Orders","description":"Get order history for customer\n\nRequirements (HU_MANAGE_USERS):\n- Return all pedidos for usuario_id\n- Sort by fecha_creacion DESC (newest first)\n- Include all pedido items\n- Pagination support","operationId":"get_user_orders_api_admin_usuarios__usuario_id__pedidos_get","parameters":[{"name":"usuario_id","in":"path","required":true,"schema":{"type":"integer","title":"Usuario Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PedidoResponse"},"title":"Response Get User Orders Api Admin Usuarios  Usuario Id  Pedidos Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/usuarios/{usuario_id}/stats":{"get":{"tags":["Admin Users","admin-users"],"summary":"Get User Stats","description":"Get customer statistics\n\nRequirements:\n- Total orders count\n- Total spent (sum of pedido totals)\n- Last order date\n- Preferred category (most purchased)","operationId":"get_user_stats_api_admin_usuarios__usuario_id__stats_get","parameters":[{"name":"usuario_id","in":"path","required":true,"schema":{"type":"integer","title":"Usuario Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/home/productos":{"get":{"tags":["Home Products","home-products"],"summary":"Browse Products","description":"Browse products by category/subcategory\n\nRequirements (HU_HOME_PRODUCTS):\n- Return hierarchical structure: Category -> Subcategory -> Products\n- Filter by categoria_id and/or subcategoria_id\n- Only return active products with stock > 0\n- Pagination support\n- Default limit 12 (typical grid layout)","operationId":"browse_products_api_home_productos_get","parameters":[{"name":"categoria_id","in":"query","required":false,"schema":{"type":"integer","title":"Categoria Id"}},{"name":"subcategoria_id","in":"query","required":false,"schema":{"type":"integer","title":"Subcategoria Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":12,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductoResponse"},"title":"Response Browse Products Api Home Productos Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cart":{"get":{"tags":["Home Products","home-products"],"summary":"Get Cart","description":"Get current cart (anonymous or authenticated)\n\nRequirements (HU_HOME_PRODUCTS):\n- For anonymous users: use session_id from header/cookie\n- For authenticated users: use user_id from JWT\n- Return cart with items and total","operationId":"get_cart_api_cart_get","parameters":[{"name":"session-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session-Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Home Products","home-products"],"summary":"Clear Cart","description":"Clear entire cart\n\nRequirements:\n- Delete all CartItems for cart\n- Publishes cart.vaciar queue message","operationId":"clear_cart_api_cart_delete","parameters":[{"name":"session-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cart/add":{"post":{"tags":["Home Products","home-products"],"summary":"Add To Cart","description":"Add product to cart (anonymous or authenticated)\n\nRequirements (HU_HOME_PRODUCTS):\n- For anonymous: create cart if not exists, use session_id\n- For authenticated: use user cart\n- Validate product exists and stock available\n- If product already in cart: add to quantity (check stock limit)\n- Publishes cart.item.agregar queue message","operationId":"add_to_cart_api_cart_add_post","parameters":[{"name":"session-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session-Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cart/items/{item_id}":{"put":{"tags":["Home Products","home-products"],"summary":"Update Cart Item","description":"Update quantity of cart item\n\nRequirements (HU_HOME_PRODUCTS):\n- Validate new cantidad doesn't exceed stock\n- Publishes cart.item.actualizar queue message","operationId":"update_cart_item_api_cart_items__item_id__put","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"integer","title":"Item Id"}},{"name":"cantidad","in":"query","required":true,"schema":{"type":"integer","exclusiveMinimum":0,"title":"Cantidad"}},{"name":"session-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Home Products","home-products"],"summary":"Remove From Cart","description":"Remove item from cart\n\nRequirements (HU_HOME_PRODUCTS):\n- Delete CartItem record\n- Publishes cart.item.eliminar queue message","operationId":"remove_from_cart_api_cart_items__item_id__delete","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"integer","title":"Item Id"}},{"name":"session-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_add_carousel_image_api_admin_carrusel_post":{"properties":{"orden":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Orden"},"link_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link Url"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["orden","file"],"title":"Body_add_carousel_image_api_admin_carrusel_post"},"Body_create_product_api_admin_productos_post":{"properties":{"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File"}},"type":"object","title":"Body_create_product_api_admin_productos_post"},"Body_reorder_carousel_api_admin_carrusel__imagen_id__reorder_post":{"properties":{"nueva_orden":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Nueva Orden"}},"type":"object","required":["nueva_orden"],"title":"Body_reorder_carousel_api_admin_carrusel__imagen_id__reorder_post"},"Body_update_product_image_api_admin_productos__producto_id__images__imagen_id__put":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"es_principal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Es Principal"},"orden":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Orden"}},"type":"object","required":["file"],"title":"Body_update_product_image_api_admin_productos__producto_id__images__imagen_id__put"},"Body_upload_product_image_api_admin_productos__producto_id__images_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_product_image_api_admin_productos__producto_id__images_post"},"CarruselImagenResponse":{"properties":{"id":{"type":"integer","title":"Id"},"orden":{"type":"integer","title":"Orden"},"imagen_url":{"type":"string","title":"Imagen Url"},"link_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link Url"},"activo":{"type":"boolean","title":"Activo"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","orden","imagen_url","link_url","activo","created_at"],"title":"CarruselImagenResponse"},"CarruselImagenUpdate":{"properties":{"orden":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Orden"},"link_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Link Url"}},"type":"object","title":"CarruselImagenUpdate"},"CartItemCreate":{"properties":{"producto_id":{"type":"integer","title":"Producto Id"},"cantidad":{"type":"integer","exclusiveMinimum":0.0,"title":"Cantidad"}},"type":"object","required":["producto_id","cantidad"],"title":"CartItemCreate"},"CartItemResponse":{"properties":{"id":{"type":"integer","title":"Id"},"producto_id":{"type":"integer","title":"Producto Id"},"cantidad":{"type":"integer","title":"Cantidad"},"precio_unitario":{"type":"number","title":"Precio Unitario"}},"type":"object","required":["id","producto_id","cantidad","precio_unitario"],"title":"CartItemResponse"},"CartMergeInfo":{"properties":{"merged":{"type":"boolean","title":"Merged"},"items_adjusted":{"items":{},"type":"array","title":"Items Adjusted","default":[]}},"type":"object","required":["merged"],"title":"CartMergeInfo"},"CartResponse":{"properties":{"id":{"type":"integer","title":"Id"},"usuario_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Usuario Id"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"items":{"items":{"$ref":"#/components/schemas/CartItemResponse"},"type":"array","title":"Items","default":[]},"total":{"type":"number","title":"Total"}},"type":"object","required":["id","usuario_id","session_id","total"],"title":"CartResponse"},"CategoriaCreateRequest":{"properties":{"nombre":{"type":"string","maxLength":100,"minLength":2,"title":"Nombre"}},"type":"object","required":["nombre"],"title":"CategoriaCreateRequest","description":"Request schema for creating a category - EXACT as per HU specification"},"CategoriaResponse":{"properties":{"id":{"type":"integer","title":"Id"},"nombre":{"type":"string","title":"Nombre"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"subcategorias":{"items":{"$ref":"#/components/schemas/SubcategoriaResponse"},"type":"array","title":"Subcategorias","default":[]}},"type":"object","required":["id","nombre","created_at","updated_at"],"title":"CategoriaResponse"},"CategoriaUpdateRequest":{"properties":{"nombre":{"type":"string","maxLength":100,"minLength":2,"title":"Nombre"}},"type":"object","required":["nombre"],"title":"CategoriaUpdateRequest","description":"Request schema for updating a category - EXACT as per HU specification"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InventarioHistorialResponse":{"properties":{"id":{"type":"integer","title":"Id"},"producto_id":{"type":"integer","title":"Producto Id"},"cantidad_anterior":{"type":"integer","title":"Cantidad Anterior"},"cantidad_nueva":{"type":"integer","title":"Cantidad Nueva"},"tipo_movimiento":{"type":"string","title":"Tipo Movimiento"},"referencia":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referencia"},"usuario_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Usuario Id"},"fecha":{"type":"string","format":"date-time","title":"Fecha"}},"type":"object","required":["id","producto_id","cantidad_anterior","cantidad_nueva","tipo_movimiento","referencia","usuario_id","fecha"],"title":"InventarioHistorialResponse"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"LoginSuccessResponse":{"properties":{"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"},"access_token":{"type":"string","title":"Access Token"},"cart_merge":{"anyOf":[{"$ref":"#/components/schemas/CartMergeInfo"},{"type":"null"}]}},"type":"object","required":["status","message","access_token"],"title":"LoginSuccessResponse"},"PedidoCreate":{"properties":{"direccion_entrega":{"type":"string","minLength":10,"title":"Direccion Entrega"},"telefono_contacto":{"type":"string","pattern":"^\\d{7,15}$","title":"Telefono Contacto"},"nota_especial":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Nota Especial"},"usuario_id":{"type":"integer","title":"Usuario Id"},"items":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Items","default":[]}},"type":"object","required":["direccion_entrega","telefono_contacto","usuario_id"],"title":"PedidoCreate"},"PedidoEstadoUpdate":{"properties":{"estado":{"type":"string","pattern":"^(Pendiente|Enviado|Entregado|Cancelado)$","title":"Estado"},"nota":{"anyOf":[{"type":"string","maxLength":300},{"type":"null"}],"title":"Nota"}},"type":"object","required":["estado"],"title":"PedidoEstadoUpdate"},"PedidoItemResponse":{"properties":{"id":{"type":"integer","title":"Id"},"producto_id":{"type":"integer","title":"Producto Id"},"cantidad":{"type":"integer","title":"Cantidad"},"precio_unitario":{"type":"number","title":"Precio Unitario"}},"type":"object","required":["id","producto_id","cantidad","precio_unitario"],"title":"PedidoItemResponse"},"PedidoResponse":{"properties":{"id":{"type":"integer","title":"Id"},"usuario_id":{"type":"integer","title":"Usuario Id"},"estado":{"type":"string","title":"Estado"},"total":{"type":"number","title":"Total"},"fecha_creacion":{"type":"string","format":"date-time","title":"Fecha Creacion"},"items":{"items":{"$ref":"#/components/schemas/PedidoItemResponse"},"type":"array","title":"Items","default":[]}},"type":"object","required":["id","usuario_id","estado","total","fecha_creacion"],"title":"PedidoResponse"},"ProductoImagenResponse":{"properties":{"id":{"type":"integer","title":"Id"},"producto_id":{"type":"integer","title":"Producto Id"},"ruta_imagen":{"type":"string","title":"Ruta Imagen"},"es_principal":{"type":"boolean","title":"Es Principal"},"orden":{"type":"integer","title":"Orden"}},"type":"object","required":["id","producto_id","ruta_imagen","es_principal","orden"],"title":"ProductoImagenResponse"},"ProductoResponse":{"properties":{"id":{"type":"integer","title":"Id"},"nombre":{"type":"string","title":"Nombre"},"descripcion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Descripcion"},"precio":{"type":"number","title":"Precio"},"peso_gramos":{"type":"integer","title":"Peso Gramos"},"cantidad_disponible":{"type":"integer","title":"Cantidad Disponible"},"categoria_id":{"type":"integer","title":"Categoria Id"},"subcategoria_id":{"type":"integer","title":"Subcategoria Id"},"activo":{"type":"boolean","title":"Activo"},"categoria":{"anyOf":[{"$ref":"#/components/schemas/CategoriaResponse"},{"type":"null"}]},"subcategoria":{"anyOf":[{"$ref":"#/components/schemas/SubcategoriaResponse"},{"type":"null"}]},"imagenes":{"items":{"type":"string"},"type":"array","title":"Imagenes","default":[]},"fecha_creacion":{"type":"string","format":"date-time","title":"Fecha Creacion"}},"type":"object","required":["id","nombre","descripcion","precio","peso_gramos","cantidad_disponible","categoria_id","subcategoria_id","activo","fecha_creacion"],"title":"ProductoResponse"},"ProductoUpdate":{"properties":{"nombre":{"anyOf":[{"type":"string","maxLength":100,"minLength":3},{"type":"null"}],"title":"Nombre"},"descripcion":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Descripcion"},"precio":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Precio"},"peso_gramos":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Peso Gramos"},"categoria_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Categoria Id"},"subcategoria_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Subcategoria Id"},"cantidad_disponible":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Cantidad Disponible"},"activo":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Activo"}},"type":"object","title":"ProductoUpdate"},"ReabastecimientoRequest":{"properties":{"cantidad":{"type":"integer","exclusiveMinimum":0.0,"title":"Cantidad"},"referencia":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Referencia"}},"type":"object","required":["cantidad"],"title":"ReabastecimientoRequest"},"RegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","minLength":10,"title":"Password"},"nombre":{"type":"string","maxLength":100,"minLength":1,"title":"Nombre"},"cedula":{"anyOf":[{"type":"string","pattern":"^\\d{6,12}$"},{"type":"null"}],"title":"Cedula"},"telefono":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Telefono"},"direccion_envio":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Direccion Envio"},"preferencia_mascotas":{"anyOf":[{"type":"string","pattern":"^(Perros|Gatos|Ambos|Ninguno)$"},{"type":"null"}],"title":"Preferencia Mascotas"}},"type":"object","required":["email","password","nombre"],"title":"RegisterRequest","description":"Request schema for user registration - matches HU specifications exactly"},"ResendCodeRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"}},"type":"object","required":["email"],"title":"ResendCodeRequest","description":"Request schema for resending verification code"},"StandardResponse":{"properties":{"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["status","message"],"title":"StandardResponse","description":"Standard response schema matching HU specifications exactly"},"SubcategoriaCreateRequest":{"properties":{"categoriaId":{"type":"string","title":"Categoriaid","description":"Category ID (can be GUID or bigint as string)"},"nombre":{"type":"string","maxLength":100,"minLength":2,"title":"Nombre"}},"type":"object","required":["categoriaId","nombre"],"title":"SubcategoriaCreateRequest","description":"Request schema for creating a subcategory - EXACT as per HU specification"},"SubcategoriaResponse":{"properties":{"id":{"type":"integer","title":"Id"},"categoria_id":{"type":"integer","title":"Categoria Id"},"nombre":{"type":"string","title":"Nombre"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","categoria_id","nombre","created_at","updated_at"],"title":"SubcategoriaResponse"},"SubcategoriaUpdateRequest":{"properties":{"nombre":{"type":"string","maxLength":100,"minLength":2,"title":"Nombre"}},"type":"object","required":["nombre"],"title":"SubcategoriaUpdateRequest","description":"Request schema for updating a subcategory - EXACT as per HU specification"},"SuccessResponse":{"properties":{"status":{"type":"string","title":"Status","default":"success"},"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"Standard success response - EXACT as per HU specification"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","expires_in"],"title":"TokenResponse"},"UsuarioDetailResponse":{"properties":{"id":{"type":"integer","title":"Id"},"nombre_completo":{"type":"string","title":"Nombre Completo"},"email":{"type":"string","title":"Email"},"cedula":{"type":"string","title":"Cedula"},"fecha_registro":{"type":"string","format":"date-time","title":"Fecha Registro"},"ultimo_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ultimo Login"}},"type":"object","required":["id","nombre_completo","email","cedula","fecha_registro","ultimo_login"],"title":"UsuarioDetailResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerificationCodeRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"code":{"type":"string","pattern":"^\\d{6}$","title":"Code"}},"type":"object","required":["email","code"],"title":"VerificationCodeRequest","description":"Request schema for email verification"}}}}
